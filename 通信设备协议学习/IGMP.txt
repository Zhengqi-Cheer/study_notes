Content-Type: text/x-zim-wiki
Wiki-Format: zim 0.6
Creation-Date: 2024-11-19T09:35:24+08:00

====== IGMP ======
Created 星期二 19 十一月 2024

全称：Internet Group Management Protocol（互联网组管理协议）
属 tcp/ip协议族， ip协议号是0x02。
定义：IGMP用来在接收者主机和与其直接相邻的组播路由器之间建立和维护组播组成员关系。IGMP通过在接收者主机和组播路由器之间交互IGMP报文实现组成员管理功能，IGMP报文封装在IP报文中。


IGMP v1、v2（rfc2236）、v3
1、IGMPv1仅定义了组成员的加入和查询。
2、IGMPv2在v1的基础上增加了了离组机制。
3、IGMPv3在v2基础上增加了可以指定接收或不接收某些组播源的报文。

版本兼容：高版本兼容低版本。

### IGMP设备角色： 查询器和非查询器。
	查询器：负责发送查询报文，接收加入和离组报文。
	非查询器： 
	
	注意：
	1、一个网段只有一个查询器，查询器通过选举产生。
	2、

查询器选举规则：（IGMPv2是这种；IGMPv1不支持查询器选举，靠组播路由协议PIM选举；IGMPv3 ???）
	1、设备启动时认为自己是查询器，发送查询报文；若接收到ip比自己小的查询报文，则自己是非查询器，并记录其他查询器以及其超时时间。
	2、非查询器，接收到其他查询报文，如ip更小，更新ip更小的为查询器。
	3、非查询器，其他组播查询器超时，则自己当查询器。
	总结：IP小的是查询器。

== =====组播mac与ip转换====== ==
